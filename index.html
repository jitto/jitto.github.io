<html>
<head><title>Hello</title></head>
<body>
  <!--
Choose speech engine: 
<input type="radio" name="speechEngine" value="html5"/>HTML5
<input type="radio" name="speechEngine" value="google"/>Google
<br>
-->
Enter list of words (one in each line) :
<br>
<textarea rows="40" cols="50" id="listOfWords">
test
text
dust
</textarea>
<br>
<button onclick="askWords()">Ask me these words</button>
<table>
  <tr><th>Correct words</th><th>Wrong words</th></tr>
  <tr>
    <td><textarea rows="4" cols="20" id="correct"/></td>
    <td><textarea rows="4" cols="20" id="wrong"/></tr>
</table>
</body>
<script>
window.speechSynthesis.speak(new SpeechSynthesisUtterance("Hello There"));

var listOfWords = document.getElementById("listOfWords");
var correct = document.getElementById("correct");
var wrong = document.getElementById("wrong");

function askWords() {
  //var speechEngine = document.querySelector('input[name=speechEngine]:checked').value;
  var allText = listOfWords.value.split("\n");
  listOfWords.value = "";
  correct.value = "";
  wrong.value = "";
  for (var i in allText) {
    var expectedValue = allText[i];
    if (expectedValue.length > 0) {
      askWord(expectedValue);
    }
  }
}

function askWord(expectedValue) {
  var msg = new SpeechSynthesisUtterance(expectedValue);
  var response = null;
  while (response == null) {
    window.speechSynthesis.speak(msg);
    response = window.prompt("Type in spelling or cancel to repeat");
  }
  if (response === expectedValue) {
    correct.value += expectedValue + "\n";
  } else {
    wrong.value += expectedValue + "\n";
  }
  listOfWords.value += expectedValue + "\n";
}

function speak(expectedValue) {
  var audio = new Audio();
  audio.src ='https://translate.google.com/translate_tts?ie=utf-8&tl=en&q=Hello%20World.';
  audio.play();
}
</script>
</html>
